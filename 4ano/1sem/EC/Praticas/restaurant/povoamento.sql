-- RESTAURANTES
INSERT INTO RESTAURANTE (NOME, LOCALIZACAO, TELEFONE) VALUES ('Pizza House', 'Rua A, 123', '1111-1111');
INSERT INTO RESTAURANTE (NOME, LOCALIZACAO, TELEFONE) VALUES ('Sushi Express', 'Rua B, 45', '2222-2222');
INSERT INTO RESTAURANTE (NOME, LOCALIZACAO, TELEFONE) VALUES ('Burger King', 'Rua C, 67', '3333-3333');
INSERT INTO RESTAURANTE (NOME, LOCALIZACAO, TELEFONE) VALUES ('Taco Loco', 'Rua D, 89', '4444-4444');
INSERT INTO RESTAURANTE (NOME, LOCALIZACAO, TELEFONE) VALUES ('Veggie Corner', 'Rua E, 10', '5555-5555');

-- CLIENTES
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Ana', 'ana@email.com', '9100-0001', 'Rua da Liberdade, 1');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Bruno', 'bruno@email.com', '9100-0002', 'Rua da Liberdade, 2');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Carla', 'carla@email.com', '9100-0003', 'Rua da Liberdade, 3');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Diogo', 'diogo@email.com', '9100-0004', 'Rua da Liberdade, 4');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Eva', 'eva@email.com', '9100-0005', 'Rua da Liberdade, 5');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Fábio', 'fabio@email.com', '9100-0006', 'Rua da Liberdade, 6');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Gabriela', 'gabriela@email.com', '9100-0007', 'Rua da Liberdade, 7');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Henrique', 'henrique@email.com', '9100-0008', 'Rua da Liberdade, 8');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Isabel', 'isabel@email.com', '9100-0009', 'Rua da Liberdade, 9');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Joana', 'joana@email.com', '9100-0010', 'Rua da Liberdade, 10');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Katia', 'katia@email.com', '9100-0011', 'Rua da Liberdade, 11');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Leonardo', 'leonardo@email.com', '9100-0012', 'Rua da Liberdade, 12');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Marta', 'marta@email.com', '9100-0013', 'Rua da Liberdade, 13');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Nuno', 'nuno@email.com', '9100-0014', 'Rua da Liberdade, 14');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Olívia', 'olivia@email.com', '9100-0015', 'Rua da Liberdade, 15');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Paulo', 'paulo@email.com', '9100-0016', 'Rua da Liberdade, 16');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Rita', 'rita@email.com', '9100-0017', 'Rua da Liberdade, 17');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Ricardo', 'ricardo@email.com', '9100-0018', 'Rua da Liberdade, 18');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Sofia', 'sofia@email.com', '9100-0019', 'Rua da Liberdade, 19');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Tiago', 'tiago@email.com', '9100-0020', 'Rua da Liberdade, 20');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Ursula', 'ursula@email.com', '9100-0021', 'Rua da Liberdade, 21');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Vasco', 'vasco@email.com', '9100-0022', 'Rua da Liberdade, 22');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Xavier', 'xavier@email.com', '9100-0023', 'Rua da Liberdade, 23');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Yara', 'yara@email.com', '9100-0024', 'Rua da Liberdade, 24');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Zé', 'ze@email.com', '9100-0025', 'Rua da Liberdade, 25');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Alexandra', 'alexandra@email.com', '9100-0026', 'Rua do Sol, 1');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Bruno', 'bruno2@email.com', '9100-0027', 'Rua do Sol, 2');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Cláudia', 'claudia@email.com', '9100-0028', 'Rua do Sol, 3');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Daniel', 'daniel@email.com', '9100-0029', 'Rua do Sol, 4');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Eduarda', 'eduarda@email.com', '9100-0030', 'Rua do Sol, 5');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Filipe', 'filipe@email.com', '9100-0031', 'Rua do Sol, 6');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Glória', 'gloria@email.com', '9100-0032', 'Rua do Sol, 7');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Hugo', 'hugo2@email.com', '9100-0033', 'Rua do Sol, 8');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Inês', 'ines@email.com', '9100-0034', 'Rua do Sol, 9');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('João', 'joao@email.com', '9100-0035', 'Rua do Sol, 10');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Karina', 'karina@email.com', '9100-0036', 'Rua do Sol, 11');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Leandro', 'leandro@email.com', '9100-0037', 'Rua do Sol, 12');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Mónica', 'monica@email.com', '9100-0038', 'Rua do Sol, 13');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Nélson', 'nelson@email.com', '9100-0039', 'Rua do Sol, 14');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Olga', 'olga@email.com', '9100-0040', 'Rua do Sol, 15');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Pedro', 'pedro@email.com', '9100-0041', 'Rua do Sol, 16');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Raquel', 'raquel@email.com', '9100-0042', 'Rua do Sol, 17');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Sérgio', 'sergio@email.com', '9100-0043', 'Rua do Sol, 18');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Tatiana', 'tatiana@email.com', '9100-0044', 'Rua do Sol, 19');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Vítor', 'vitor@email.com', '9100-0045', 'Rua do Sol, 20');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Wanda', 'wanda@email.com', '9100-0046', 'Rua do Sol, 21');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Ximena', 'ximena2@email.com', '9100-0047', 'Rua do Sol, 22');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Yago', 'yago@email.com', '9100-0048', 'Rua do Sol, 23');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Zena', 'zena@email.com', '9100-0049', 'Rua do Sol, 24');
INSERT INTO CLIENTE (NOME, EMAIL, TELEFONE, ENDERECO) VALUES ('Artur', 'artur@email.com', '9100-0050', 'Rua do Sol, 25');

-- ENTREGADORES
INSERT INTO ENTREGADOR (NOME, TELEFONE, VEICULO) VALUES ('Felipe', '9100-0001', 'Moto');
INSERT INTO ENTREGADOR (NOME, TELEFONE, VEICULO) VALUES ('Gabriel', '9100-0002', 'Bicicleta');
INSERT INTO ENTREGADOR (NOME, TELEFONE, VEICULO) VALUES ('Hugo', '9100-0003', 'Carro');
INSERT INTO ENTREGADOR (NOME, TELEFONE, VEICULO) VALUES ('Isabel', '9100-0004', 'Moto');
INSERT INTO ENTREGADOR (NOME, TELEFONE, VEICULO) VALUES ('Julia', '9100-0005', 'Bicicleta');

-- CATEGORIAS
INSERT INTO CATEGORIA (NOME) VALUES ('Pizza');
INSERT INTO CATEGORIA (NOME) VALUES ('Sushi');
INSERT INTO CATEGORIA (NOME) VALUES ('Burger');
INSERT INTO CATEGORIA (NOME) VALUES ('Tacos');
INSERT INTO CATEGORIA (NOME) VALUES ('Vegetariano');

-- PRATOS
INSERT INTO PRATO (NOME, PRECO, ID_RESTAURANTE, ID_CATEGORIA) VALUES ('Margherita', 25, 1, 1);
INSERT INTO PRATO (NOME, PRECO, ID_RESTAURANTE, ID_CATEGORIA) VALUES ('Pepperoni', 30, 1, 1);
INSERT INTO PRATO (NOME, PRECO, ID_RESTAURANTE, ID_CATEGORIA) VALUES ('Sushi Mix', 40, 2, 2);
INSERT INTO PRATO (NOME, PRECO, ID_RESTAURANTE, ID_CATEGORIA) VALUES ('California Roll', 35, 2, 2);
INSERT INTO PRATO (NOME, PRECO, ID_RESTAURANTE, ID_CATEGORIA) VALUES ('Cheeseburger', 28, 3, 3);
INSERT INTO PRATO (NOME, PRECO, ID_RESTAURANTE, ID_CATEGORIA) VALUES ('Veggie Burger', 27, 3, 5);
INSERT INTO PRATO (NOME, PRECO, ID_RESTAURANTE, ID_CATEGORIA) VALUES ('Taco Beef', 20, 4, 4);
INSERT INTO PRATO (NOME, PRECO, ID_RESTAURANTE, ID_CATEGORIA) VALUES ('Taco Chicken', 22, 4, 4);
INSERT INTO PRATO (NOME, PRECO, ID_RESTAURANTE, ID_CATEGORIA) VALUES ('Salada Veggie', 18, 5, 5);

CREATE SEQUENCE seq_item_pedido START WITH 1 INCREMENT BY 1;


-- PEDIDOS e ITENS

DECLARE
    v_cliente NUMBER;
    v_entregador NUMBER;
    v_restaurante NUMBER;
    v_pedido NUMBER;
    v_prato NUMBER;
    v_count NUMBER;
BEGIN
    FOR i IN 1..500 LOOP
        SELECT ID_CLIENTE INTO v_cliente
        FROM (SELECT ID_CLIENTE FROM CLIENTE ORDER BY DBMS_RANDOM.RANDOM) WHERE ROWNUM = 1;

        SELECT ID_ENTREGADOR INTO v_entregador
        FROM (SELECT ID_ENTREGADOR FROM ENTREGADOR ORDER BY DBMS_RANDOM.RANDOM) WHERE ROWNUM = 1;

        SELECT ID_RESTAURANTE INTO v_restaurante
        FROM (SELECT ID_RESTAURANTE FROM RESTAURANTE ORDER BY DBMS_RANDOM.RANDOM) WHERE ROWNUM = 1;

        INSERT INTO PEDIDO (DATA_PEDIDO, VALOR_TOTAL, ID_CLIENTE, ID_ENTREGADOR, ID_RESTAURANTE)
        VALUES (SYSDATE - ROUND(DBMS_RANDOM.VALUE(0,30)), 0, v_cliente, v_entregador, v_restaurante)
        RETURNING ID_PEDIDO INTO v_pedido;

        FOR j IN 1..TRUNC(DBMS_RANDOM.VALUE(1,4)) LOOP
            SELECT ID_PRATO INTO v_prato
            FROM (SELECT ID_PRATO FROM PRATO WHERE ID_RESTAURANTE = v_restaurante ORDER BY DBMS_RANDOM.RANDOM)
            WHERE ROWNUM = 1;

            SELECT COUNT(*) INTO v_count
            FROM ITEM_PEDIDO
            WHERE ID_PEDIDO = v_pedido AND ID_PRATO = v_prato;

            IF v_count = 0 THEN
                INSERT INTO ITEM_PEDIDO (ID_PEDIDO, ID_PRATO, QUANTIDADE)
                VALUES (v_pedido, v_prato, TRUNC(DBMS_RANDOM.VALUE(1,4)));
            END IF;
        END LOOP;

        UPDATE PEDIDO p
        SET VALOR_TOTAL = (
            SELECT SUM(pr.PRECO * ip.QUANTIDADE)
            FROM ITEM_PEDIDO ip
            JOIN PRATO pr ON pr.ID_PRATO = ip.ID_PRATO
            WHERE ip.ID_PEDIDO = p.ID_PEDIDO
        )
        WHERE ID_PEDIDO = v_pedido;

    END LOOP;
END;
/


-- REVIEWS 
DECLARE
    v_pedido NUMBER;
    v_texto VARCHAR2(4000);
    v_avaliacao NUMBER;
BEGIN
    FOR i IN 1..200 LOOP
        SELECT ID_PEDIDO INTO v_pedido
        FROM (
            SELECT ID_PEDIDO FROM PEDIDO ORDER BY DBMS_RANDOM.RANDOM
        ) WHERE ROWNUM = 1;

        CASE TRUNC(DBMS_RANDOM.VALUE(1,6))
            WHEN 1 THEN
                v_texto := 'Excelente serviço, entrega rápida e comida deliciosa!';
                v_avaliacao := 5;
            WHEN 2 THEN
                v_texto := 'Muito bom, recomendo!';
                v_avaliacao := 4;
            WHEN 3 THEN
                v_texto := 'Comida razoável, demorou um pouco na entrega.';
                v_avaliacao := 3;
            WHEN 4 THEN
                v_texto := 'Não fiquei satisfeito com a qualidade do prato.';
                v_avaliacao := 2;
            WHEN 5 THEN
                v_texto := 'Péssimo, comida fria e entrega atrasada.';
                v_avaliacao := 1;
        END CASE;

        INSERT INTO REVIEW (ID_PEDIDO, DATA_REVIEW, CONTEUDO, AVALIACAO)
        VALUES (v_pedido, SYSDATE - ROUND(DBMS_RANDOM.VALUE(0,30)), v_texto, v_avaliacao);
    END LOOP;
END;
/
